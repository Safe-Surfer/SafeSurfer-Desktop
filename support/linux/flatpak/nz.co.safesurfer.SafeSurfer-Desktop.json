{
	"app-id" : "nz.co.safesurfer.SafeSurfer-Desktop",
	"runtime" : "org.freedesktop.Platform",
	"runtime-version" : "1.6",
	"sdk" : "org.freedesktop.Sdk",
	"base": "io.atom.electron.BaseApp",
	"base-version": "stable",
	"command": "run.sh",
	"command" : "SafeSurfer-Desktop",
	"build-options" : {
		"cflags": "-O2 -g",
		"cxxflags": "-O2 -g",
		"env": {
			"NPM_CONFIG_LOGLEVEL": "info"
		}
	},
        "finish-args": [
		"--share=ipc",
		"--socket=x11",
		"--socket=pulseaudio",
		"--share=network"
	],
	"modules" : [{
        	"name": "node",
		"buildsystem": "simple",
		"build-commands": [
			"mkdir -p /app/{bin,share,lib}",
			"cp bin/* /app/bin",
			"cp -r share/* /app/share",
			"cp -r lib/* /app/lib"
		],
        	"sources": [{
			"type": "archive",
			"url": "https://nodejs.org/dist/v8.12.0/node-v8.12.0-linux-x64.tar.xz",
			"sha256": "29a20479cd1e3a03396a4e74a1784ccdd1cf2f96928b56f6ffa4c8dae40c88f2"
		}]
        },
        {
		"name": "SafeSurfer-Desktop",
		"build-options" : {
			"env": {
				"electron_config_cache": "/run/build/SafeSurfer-Desktop/npm-cache"
			}
		},
		"buildsystem": "simple",
		"sources": [{
			"type": "archive",
			"url": "https://gitlab.com/safesurfer/SafeSurfer-Desktop/-/archive/1.0.0b5/SafeSurfer-Desktop-1.0.0b5.zip",
			"sha256": "e1ff1e08cc7ebbaf165a6f80f4965ca3202eb2f2a50952ce87328f8bf0dc7748"
			},
			"generated-sources.json"
		],
		"build-commands": [
			"npm install --prefix=/app/ --offline --cache=/run/build/SafeSurfer-Desktop/npm-cache",
			"make PACKAGEFORMAT=flatpak BUILDMODE= build-linux",
			"make DESTDIR=/app/ install"
		]
        }],
	"rename-appdata-file": "SafeSurfer-Desktop.appdata.xml",
	"rename-icon": "ss-logo",
	"rename-desktop-file": "SafeSurfer-Desktop.desktop"
}